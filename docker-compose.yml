version: "3.8"

services:
  cantrips:
    build: .
    restart: unless-stopped
    environment:
      - TZ=America/New_York
      - ITAD_API_KEY=${ITAD_API_KEY}
      - BETTER_AUTH_SECRET=${BETTER_AUTH_SECRET}
      - BETTER_AUTH_URL=${BETTER_AUTH_URL}
      - DISCORD_CLIENT_ID=${DISCORD_CLIENT_ID}
      - DISCORD_CLIENT_SECRET=${DISCORD_CLIENT_SECRET}
      - DISCORD_DEALS_WEBHOOK=${DISCORD_DEALS_WEBHOOK}
      - NODE_ENV=production
    volumes:
      - cantrips_data:/app/data
    networks:
      - web
    expose:
      - "3000"

volumes:
  cantrips_data:

networks:
  web:
    external: true
